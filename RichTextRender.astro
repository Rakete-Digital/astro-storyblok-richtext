---
import { richTextRender } from "./richTextRender";
import { richTextHasContent } from "./richTextHasContent";

const {
    content,
    className = "",
    style = {},
    except,
    resolvers,
    ...rest
}: {
    content: any;
    className?: string;
    style?: Record<string, any>;
    except?: string[];
    resolvers?: any;
    [key: string]: any;
} = Astro.props;

const html = await richTextRender(content, { except, resolvers });
---

{
    richTextHasContent(content) && (
        <div
            class:list={["rich-text-render", className]}
            style={style}
            set:html={html}
            {...rest}
        />
    )
}

<style is:global lang="less">
    .rich-text-render.rich-text-render {
        *:not(a):not(a *) {
            color: var(--contentColor);
        }

        ul li,
        ol li {
            color: var(--contentColor);
        }

        /* === Reset === */
        ul,
        ol {
            margin: 0;
            padding: 0;
            list-style-position: outside;
        }

        /* === Unordered List === */
        ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;

            ::marker {
                font-weight: @font-weight__bold;
            }
        }

        ul li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        /* === Ordered List === */
        ol {
            list-style-type: decimal;
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;

            ::marker {
                font-weight: @font-weight__bold;
            }
        }

        ol li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        /* === Nested Lists === */
        ul ul,
        ol ol,
        ul ol,
        ol ul {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
        }

        /* Nested unordered lists */
        ul ul {
            list-style-type: circle;
        }

        ul ul ul {
            list-style-type: square;
        }

        /* Nested ordered lists */
        ol ol {
            list-style-type: lower-alpha;
        }

        ol ol ol {
            list-style-type: lower-roman;
        }

        img,
        picture,
        video,
        canvas,
        svg {
            display: inline-block;
            max-width: 100%;
        }

        blockquote {
            border-left: 1px solid @primary;
            padding: 20px 0 20px 20px;
        }

        &.subscript {
            font-size: 1.3rem !important;
            line-height: 1.8rem !important;
            margin-top: 42px;
        }
    }
</style>
